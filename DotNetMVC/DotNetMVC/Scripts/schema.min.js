dojo._hasResource["dojox.json.schema"]||(dojo._hasResource["dojox.json.schema"]=!0,dojo.provide("dojox.json.schema"),dojox.json.schema.validate=function(n,t){return this._validate(n,t,!1)},dojox.json.schema.checkPropertyChange=function(n,t,i){return this._validate(n,t,i||"property")},dojox.json.schema.mustBeValid=function(n){if(!n.valid)throw new TypeError(dojo.map(n.errors,function(n){return"for property "+n.property+": "+n.message}).join(", "));},dojox.json.schema._validate=function(n,t,i){function u(n,t,e,o){function s(n){r.push({property:e,message:n})}function a(n,t){var i,f,o,s;if(n){if(typeof n=="string"&&n!="any"&&(n=="null"?t!==null:typeof t!=n)&&!(t instanceof Array&&n=="array")&&!(n=="integer"&&t%1==0))return[{property:e,message:typeof t+" value found, but a "+n+" is required"}];if(n instanceof Array){for(i=[],f=0;f<n.length;f++)if(!(i=a(n[f],t)).length)break;if(i.length)return i}else if(typeof n=="object")return o=r,r=[],u(t,n,e),s=r,r=o,s}return[]}var h,c,v,l;if(e+=e?typeof o=="number"?"["+o+"]":typeof o=="undefined"?"":"."+o:o,(typeof t!="object"||t instanceof Array)&&(e||typeof t!="function"))return typeof t=="function"?Object(n)instanceof t||s("is not an instance of the class/constructor "+t.name):t&&s("Invalid schema/property definition "+t),null;if(i&&t.readonly&&s("is a readonly field, it can not be changed"),t["extends"]&&u(n,t["extends"],e,o),n===undefined)t.optional||s("is missing and it is not optional");else if(r=r.concat(a(t.type,n)),t.disallow&&!a(t.disallow,n).length&&s(" disallowed value was matched"),n!==null){if(n instanceof Array){if(t.items)if(t.items instanceof Array)for(o=0,h=n.length;o<h;o++)r.concat(u(n[o],t.items[o],e,o));else for(o=0,h=n.length;o<h;o++)r.concat(u(n[o],t.items,e,o));t.minItems&&n.length<t.minItems&&s("There must be a minimum of "+t.minItems+" in the array");t.maxItems&&n.length>t.maxItems&&s("There must be a maximum of "+t.maxItems+" in the array")}else t.properties&&r.concat(f(n,t.properties,e,t.additionalProperties));if(t.pattern&&typeof n=="string"&&!n.match(t.pattern)&&s("does not match the regex pattern "+t.pattern),t.maxLength&&typeof n=="string"&&n.length>t.maxLength&&s("may only be "+t.maxLength+" characters long"),t.minLength&&typeof n=="string"&&n.length<t.minLength&&s("must be at least "+t.minLength+" characters long"),typeof t.minimum!==undefined&&typeof n==typeof t.minimum&&t.minimum>n&&s("must have a minimum value of "+t.minimum),typeof t.maximum!==undefined&&typeof n==typeof t.maximum&&t.maximum<n&&s("must have a maximum value of "+t.maximum),t["enum"]){for(c=t["enum"],h=c.length,l=0;l<h;l++)if(c[l]===n){v=1;break}v||s("does not have a value in the enumeration "+c.join(", "))}typeof t.maxDecimal=="number"&&n.toString().match(new RegExp("\\.[0-9]{"+(t.maxDecimal+1)+",}"))&&s("may only have "+t.maxDecimal+" digits of decimal places")}return null}function f(n,t,f,e){var o,s,c,h;if(typeof t=="object"){(typeof n!="object"||n instanceof Array)&&r.push({property:f,message:"an object is required"});for(o in t)!t.hasOwnProperty(o)||o.charAt(0)=="_"&&o.charAt(1)=="_"||(s=n[o],c=t[o],u(s,c,f,o))}for(o in n)!n.hasOwnProperty(o)||o.charAt(0)=="_"&&o.charAt(1)=="_"||!t||t[o]||e!==!1||r.push({property:f,message:typeof s+"The property "+o+" is not defined in the schema and the schema does not allow additional properties"}),h=t&&t[o]&&t[o].requires,!h||h in n||r.push({property:f,message:"the presence of the property "+o+" requires that "+h+" also be present"}),s=n[o],!t||typeof t!="object"||o in t||u(s,e,f,o),!i&&s&&s.$schema&&(r=r.concat(u(s,s.$schema,f,o)));return r}var r=[];return t&&u(n,t,"",i||""),!i&&n&&n.$schema&&u(n,n.$schema,"",""),{valid:!r.length,errors:r}});
//# sourceMappingURL=schema.min.js.map
